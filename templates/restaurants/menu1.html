
{% extends "./base.html" %}
{% load staticfiles %}

{% block title %}
| Restaurants
{% endblock %}


{% block nav %}
    <li><a href="/restaurants/">Restaurants</a></li>
    <li><a>Menu</a></li>
    {% for dishtype in restaurant.dish_type_set.all %}  
      <li><a href="#{{dishtype}}" >{{dishtype}}</a></li>
    {% endfor %}
    <li><a href="#myModal" data-toggle="modal">Cart</a></li>
{% endblock %}


{% block content %}
    

  <a name="about"></a>	
    <div class="intro-header" style="background: url("{%static "uploads/my-bar-cafe-2.jpg" %}") no-repeat center center;background-size: 100% auto;" >
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <div class="intro-message">
                        <h1></h1>
                        <h1>{{restaurant}}, &nbsp{{restaurant.locality}}</h1>
                        <h3>{{restaurant.about}}</h3> 
                        <h3>Phone:&nbsp&nbsp{{restaurant.phone}}</h3>                       
                        <!-- <hr class="intro-divider"> -->
                        
                        

                    </div>
<!--                          -->
                    </div>
            </div>

        </div>
        </div>
<div class="container">

  <div class="page-header">
    <section id="menu">
	    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" style="position:fixed; right:50px">
	    <span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span>
	    </button>
    <h2>Digi Menu</h2>
    </section>
    {% if restaurant.dish_type_set.all %}
      {% for dishtype in restaurant.dish_type_set.all %}
        <section id="{{dishtype}}"></section>  
        <div class="panel panel-primary">
          <div class="panel-body">
            <a>{{dishtype}}</a>
          </div>
          <div class="panel-footer">
				
          <table class="table table-striped">
          <tbody>
            {% for dish in dishtype.dish_set.all %}  
              <tr>
                <td>
                  <font size="3px">{{dish}}<br></font>
                  <font style="float:right; margin-top:-25px; padding-bottom:10px">
	                  <div class="vote-buttons">
	                   {{thisUserUpVote}} 
	                  {% ifequal thisUserUpVote 0 %}
	                    <button type="button" class="btn btn-default btn-sm">Like</button>
	                  {% else %}
	                    <button type="button" class="btn btn-primary btn-sm">Like</button>
	                  {% endifequal %}
	                  {% ifequal thisUserDownVote 0 %}
	                    <button type="button" class="btn btn-default btn-sm">Dislike</button>
	                  {% else %}
	                    <button type="button" class="btn btn-primary btn-sm">Dislike</button>
	                  {% endifequal %}
	                  </div>
                  </font>
                    <font face="verdana" color="#585858">
                    {% if dish.about %}
                      {{dish.about}}<br>
                    {% endif %}
                    <table class="table table-condensed" style="border:0px">
                    <tbody>
                    {% for price_type in dish.dish_price_type_set.all %}
                      <tr align="left" >
                        <td class="col-md-6">
                        	{{price_type}}<br> 
                        	&#x20B9 {{price_type.price}}
                        </td> 
                        <td>
                        <!-- <div class="mdl-badge" data-badge="4">Inbox</div> -->
              <div class="center" style="width: 120px;margin: 0px auto;">    
                  <div class="input-group">
							          <span class="input-group-btn ">
							              <button type="button" class="btn btn-danger  btn-number"  data-type="minus" data-field="quant[2]" onclick="deleteItem('{{price_type.id}}','{{price_type}}', '{{dish}}', '{{price_type.qty}}', '{{price_type.price}}', '{{price_type.id}}item', '{{price_type.id}}')">
							                <span class="glyphicon glyphicon-minus"></span>
							              </button>
							          </span>
							          <input type="text" name="quant[2]" id='{{price_type.id}}' class="form-control input-number " value="00" min="1" max="99" >
							          <span class="input-group-btn ">
							              <button type="button" class="btn btn-success btn-number " data-type="plus" data-field="quant[2]" onclick="addItem('{{price_type.id}}','{{price_type}}', '{{dish}}', '{{price_type.qty}}', '{{price_type.price}}', '{{price_type.id}}item', '{{price_type.id}}')">
							                  <span class="glyphicon glyphicon-plus"></span>
							              </button>
							          </span>
							      </div>
								<p></p>
							</div>
                        </td>
                      </tr>
                    {% endfor %}
                    </tbody>
                    </table>
                  </font>
                </td>

              </tr>   
                     
            {% endfor %}            

    </tbody>
  </table>

          </div>
        </div>

      {% endfor %}
      <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Cart
      </button>
      <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <h4 class="modal-title" id="myModalLabel">Cart</h4>
            </div>
            <div class="modal-body" >
            	Your Order<br/>
            	<ul id="mycart">

            	</ul>
            	Total: &#x20B9 <p id="total"></p>
            	Service Charge: &#x20B9 <p id="servCharge">0</p>
            	Service Tax: &#x20B9 <p id="servTax">0</p>
            	Final: &#x20B9 <p id="finalPay">0</p>
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Reset</button>
            </div>
          </div>
        </div>
      </div>


    {% else %}
      <p>No restaurants are available currently.<br><a href="/">Go Home.</a></p>
    {% endif %}
  </div>
</div>

<script src="{%static "js/cart.js" %}"></script>
{% endblock %}
